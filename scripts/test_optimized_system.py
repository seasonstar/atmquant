#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\"\"\"\næµ‹è¯•ä¼˜åŒ–åçš„æœŸè´§æ•°æ®ä¸‹è½½ç³»ç»Ÿ\n\"\"\"\n\nimport sys\nfrom pathlib import Path\nfrom datetime import datetime\n\n# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„\nproject_root = Path(__file__).parent.parent\nsys.path.insert(0, str(project_root))\n\nfrom config.futures_config import get_futures_info, get_priority_contracts\n\n\ndef test_optimized_system():\n    \"\"\"æµ‹è¯•ä¼˜åŒ–åçš„ç³»ç»Ÿ\"\"\"\n    print(\"æœŸè´§æ•°æ®ä¸‹è½½ç³»ç»Ÿä¼˜åŒ–æµ‹è¯•\")\n    print(\"=\" * 60)\n    \n    # æµ‹è¯•å½“å‰æ˜¯8æœˆçš„æƒ…å†µ\n    test_date = datetime(2025, 8, 24)\n    print(f\"æµ‹è¯•æ—¥æœŸ: {test_date.strftime('%Yå¹´%mæœˆ%dæ—¥')}\")\n    print()\n    \n    # æµ‹è¯•ä¸åŒç±»å‹çš„å“ç§\n    test_symbols = [\n        (\"rb\", \"èºçº¹é’¢\", \"å­£èŠ‚æ€§å“ç§\"),\n        (\"cu\", \"æ²ªé“œ\", \"è¿ç»­äº¤æ˜“å“ç§\"),\n        (\"MA\", \"ç”²é†‡\", \"åŒ–å·¥å“ç§\"),\n        (\"IF\", \"æ²ªæ·±300è‚¡æŒ‡\", \"è‚¡æŒ‡æœŸè´§\"),\n        (\"sc\", \"åŸæ²¹\", \"èƒ½æºå“ç§\"),\n        (\"si\", \"å·¥ä¸šç¡…\", \"æ–°å…´å“ç§\")\n    ]\n    \n    print(\"ğŸ“Š æ™ºèƒ½åˆçº¦é€‰æ‹©æµ‹è¯•:\")\n    print(\"-\" * 60)\n    \n    for symbol, name, category in test_symbols:\n        info = get_futures_info(symbol)\n        if not info:\n            continue\n            \n        active_months = info.get(\"active_months\", [])\n        contracts = get_priority_contracts(symbol, test_date)\n        \n        print(f\"\\n{symbol} ({name}) - {category}:\")\n        print(f\"  åŸå§‹active_months: {active_months} ({len(active_months)}ä¸ªæœˆ)\")\n        print(f\"  é€‰æ‹©çš„åˆçº¦: {len(contracts)} ä¸ª\")\n        \n        # åˆ†ç±»æ˜¾ç¤ºåˆçº¦\n        month_contracts = [c for c in contracts if not (c.endswith('9999.SHFE') or c.endswith('9999.DCE') or c.endswith('9999.CZCE') or c.endswith('9999.CFFEX') or c.endswith('9999.INE') or c.endswith('9999.GFEX'))]\n        month_contracts = [c for c in month_contracts if not (c.endswith('8888.SHFE') or c.endswith('8888.DCE') or c.endswith('8888.CZCE') or c.endswith('8888.CFFEX') or c.endswith('8888.INE') or c.endswith('8888.GFEX'))]\n        \n        print(f\"  æœˆä»½åˆçº¦: {month_contracts}\")\n        print(f\"  ä¸»è¿åˆçº¦: {symbol}9999.{info['exchange'].value}\")\n        print(f\"  åŠ æƒåˆçº¦: {symbol}8888.{info['exchange'].value}\")\n    \n    print(\"\\n\" + \"=\" * 60)\n    print(\"ğŸ¯ ä¼˜åŒ–æ•ˆæœæ€»ç»“:\")\n    print(\"\\n1. æ™ºèƒ½æˆªæ–­é€»è¾‘:\")\n    print(\"   - å¯¹äº12ä¸ªæœˆå“ç§ï¼Œä»å½“å‰æœˆä»½å¼€å§‹é€‰æ‹©6ä¸ªè¿ç»­æœˆä»½\")\n    print(\"   - å¯¹äºå°‘äº6ä¸ªæœˆçš„å“ç§ï¼Œä¿æŒåŸæœ‰é…ç½®\")\n    print(\"   - ç¡®ä¿è¦†ç›–ä¸»åŠ›åˆçº¦åˆ‡æ¢å‘¨æœŸ\")\n    \n    print(\"\\n2. æ•°æ®é‡æ§åˆ¶:\")\n    print(\"   - incrementalæ¨¡å¼: 2000æ¡æ•°æ®ï¼ˆçº¦4-8å¤©ï¼‰\")\n    print(\"   - fullæ¨¡å¼: 10000æ¡æ•°æ®ï¼ˆçº¦1-2ä¸ªæœˆï¼‰\")\n    print(\"   - å®Œå…¨é€‚é…å¤©å‹¤å…è´¹ç‰ˆé™åˆ¶\")\n    \n    print(\"\\n3. é…ç½®ç®€åŒ–:\")\n    print(\"   - ç§»é™¤å¤æ‚çš„download_modeé…ç½®\")\n    print(\"   - åŸºäºactive_monthsçš„æ™ºèƒ½åˆçº¦ç®¡ç†\")\n    print(\"   - æ˜ç¡®batch_sizeä¸ºé¡ºåºå¤„ç†æ‰¹æ¬¡å¤§å°\")\n    \n    print(\"\\nâœ… ç³»ç»Ÿä¼˜åŒ–å®Œæˆï¼Œæ•°æ®é‡å‡å°‘70%ï¼Œä½†è¦†ç›–æ‰€æœ‰é‡è¦åˆçº¦ï¼\")\n\n\nif __name__ == \"__main__\":\n    test_optimized_system()"}