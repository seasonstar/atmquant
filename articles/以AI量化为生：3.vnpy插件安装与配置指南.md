> åŸåˆ›å†…å®¹ç¬¬3ç¯‡ï¼Œä¸“æ³¨AIé‡åŒ–æŠ•èµ„ã€æŒ‡æ ‡ä¿¡å·å¯è§†åŒ–ä¸ç­–ç•¥ç ”å‘ã€‚

![vnpyæ’ä»¶å®‰è£…é…ç½®å¤´å›¾](./images/vnpy-plugins-header.jpg)

## å†™åœ¨å‰é¢

ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å®Œæˆäº†vnpyå¼€å‘ç¯å¢ƒçš„æ­å»ºå’Œé¡¹ç›®ç»“æ„çš„è§„èŒƒåŒ–ï¼Œä»Šå¤©æˆ‘ä»¬è¦è¿›å…¥å®æˆ˜é˜¶æ®µï¼šå®‰è£…å’Œé…ç½®vnpyçš„æ ¸å¿ƒæ’ä»¶ã€‚

è¿™äº›æ’ä»¶æ˜¯æ„å»ºå®Œæ•´é‡åŒ–äº¤æ˜“ç³»ç»Ÿçš„åŸºç¡€ï¼š
- **vnpy_ctp**ï¼šè¿æ¥æœŸè´§å¸‚åœºçš„äº¤æ˜“æ¥å£
- **vnpy_ctastrategy**ï¼šCTAç­–ç•¥å¼•æ“ï¼Œç­–ç•¥å¼€å‘çš„æ ¸å¿ƒ
- **vnpy_datamanager**ï¼šå†å²æ•°æ®ç®¡ç†ï¼Œæ•°æ®æ˜¯ç­–ç•¥çš„ç”Ÿå‘½çº¿
- **vnpy_ctabacktester**ï¼šå›æµ‹å¼•æ“ï¼ŒéªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§
- **vnpy_mysql**ï¼šæ•°æ®åº“æ”¯æŒï¼Œæ•°æ®æŒä¹…åŒ–å­˜å‚¨

æˆ‘ä¼šè¾¹æ“ä½œè¾¹åšè®°å½•ï¼Œæ¯ä¸ªæ’ä»¶éƒ½ä¼šå®Œæ•´æ¼”ç¤ºå®‰è£…ã€é…ç½®å’ŒéªŒè¯è¿‡ç¨‹ã€‚

**é¡¹ç›®å¼€æºåœ°å€**ï¼šhttps://github.com/seasonstar/atmquant

## æ’ä»¶å®‰è£…ç­–ç•¥

vnpyçš„æ’ä»¶ç”Ÿæ€éå¸¸ä¸°å¯Œï¼Œä½†æˆ‘ä»¬è¦æœ‰é€‰æ‹©åœ°å®‰è£…ã€‚åŸºäºå®é™…äº¤æ˜“éœ€æ±‚ï¼Œæˆ‘ä»¬åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š

### æ ¸å¿ƒæ’ä»¶ï¼ˆå¿…è£…ï¼‰
- `vnpy_ctp` - CTPäº¤æ˜“æ¥å£
- `vnpy_ctastrategy` - CTAç­–ç•¥å¼•æ“  
- `vnpy_datamanager` - æ•°æ®ç®¡ç†
- `vnpy_ctabacktester` - å›æµ‹å¼•æ“
- `vnpy_mysql` - MySQLæ•°æ®åº“

### æ•°æ®æ’ä»¶ï¼ˆæŒ‰éœ€ï¼‰
- `vnpy_tqsdk` - å¤©å‹¤æ•°æ®ï¼ˆå…è´¹ï¼Œè´¨é‡å¥½ï¼‰
- `vnpy_rqdata` - ç±³ç­æ•°æ®ï¼ˆä»˜è´¹ï¼Œä¸“ä¸šï¼‰

### å®šåˆ¶æ’ä»¶ï¼ˆè‡ªç ”ï¼‰
- `vnpy_webtrader` - å®æ—¶AIäº¤æ˜“ä¿¡å·ç½‘é¡µï¼ˆçˆ†æ”¹ç‰ˆï¼‰
- `vnpy_newsmonitor` - æ–°é—»å’Œç»æµæ—¥å†ï¼ˆå®Œå…¨è‡ªç ”ï¼‰

ä»Šå¤©æˆ‘ä»¬å…ˆå®‰è£…æ ¸å¿ƒæ’ä»¶ï¼Œæ•°æ®æ’ä»¶å’Œå®šåˆ¶æ’ä»¶ä¼šåœ¨åç»­æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»ã€‚

## ç¬¬ä¸€ä¸ªæ’ä»¶ï¼švnpy_ctp - CTPäº¤æ˜“æ¥å£

CTPï¼ˆComprehensive Transaction Platformï¼‰æ˜¯ä¸ŠæœŸæŠ€æœ¯å¼€å‘çš„æœŸè´§äº¤æ˜“ç³»ç»Ÿï¼Œå‡ ä¹æ‰€æœ‰æœŸè´§å…¬å¸éƒ½ä½¿ç”¨è¿™å¥—ç³»ç»Ÿã€‚vnpy_ctpæ˜¯vnpyå¯¹CTPæ¥å£çš„å°è£…ï¼Œæ˜¯è¿æ¥æœŸè´§å¸‚åœºçš„æ¡¥æ¢ã€‚

### macOSç³»ç»Ÿçš„ç‰¹æ®Šå®‰è£…æ–¹å¼

ç”±äºæ–°ç‰ˆæœ¬CTPçš„Macç³»ç»ŸAPIé¡¹ç›®ç»“æ„å‘ç”Ÿäº†è¾ƒå¤§å˜åŒ–ï¼Œæ”¹ä¸ºäº†ä½¿ç”¨frameworkç›®å½•çš„ç»“æ„ï¼Œå› æ­¤æ— æ³•å†ç›´æ¥ä»PyPIä¸‹è½½é¢„ç¼–è¯‘å¥½çš„wheeläºŒè¿›åˆ¶åŒ…è¿›è¡Œå®‰è£…ã€‚

**Macç”¨æˆ·éœ€è¦ä»æºç ç¼–è¯‘å®‰è£…**ï¼š

#### ç¬¬ä¸€æ­¥ï¼šè·å–æºç 

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨gitå…‹éš†ï¼ˆæ¨èï¼‰
git clone https://github.com/vnpy/vnpy_ctp.git
cd vnpy_ctp

# æ–¹æ³•2ï¼šå¦‚æœç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½ZIPåŒ…å¹¶è§£å‹
# ä» https://github.com/vnpy/vnpy_ctp ä¸‹è½½ZIPåŒ…
```

**å®é™…æ“ä½œè®°å½•**ï¼š

ç”±äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ‰‹åŠ¨ä¸‹è½½çš„æ–¹å¼ã€‚vnpy_ctpæºç å·²ç»ä¸‹è½½åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚

#### ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ç¼–è¯‘ç¯å¢ƒ

åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œç¡®ä¿å·²å®‰è£…å¿…è¦çš„å¼€å‘å·¥å…·ï¼š

```bash
# æ£€æŸ¥Xcode Command Line Toolsæ˜¯å¦å·²å®‰è£…
xcode-select --version

# å¦‚æœæœªå®‰è£…ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤
xcode-select --install
```

#### ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘å®‰è£…

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source vnpy_env/bin/activate

# è¿›å…¥vnpy_ctpç›®å½•å¹¶å®‰è£…
pip install ./vnpy_ctp
```

**å®é™…æ“ä½œè®°å½•**ï¼š

ç¼–è¯‘è¿‡ç¨‹éå¸¸é¡ºåˆ©ï¼Œä½¿ç”¨äº†mesonæ„å»ºç³»ç»Ÿï¼š

```
Building wheels for collected packages: vnpy_ctp
  Building wheel for vnpy_ctp (pyproject.toml) ... done
  Created wheel for vnpy_ctp: filename=vnpy_ctp-6.7.7.2-cp311-cp311-macosx_15_0_arm64.whl
Successfully built vnpy_ctp
Successfully installed vnpy_ctp-6.7.7.2
```

### éªŒè¯vnpy_ctpå®‰è£…

è®©æˆ‘ä»¬éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š

```bash
# æµ‹è¯•å¯¼å…¥
python -c "from vnpy_ctp import CtpGateway; print('âœ“ vnpy_ctpå¯¼å…¥æˆåŠŸ'); print('âœ“ ç‰ˆæœ¬: 6.7.7.2')"
```

**å®é™…è¿è¡Œç»“æœ**ï¼š
```
âœ“ vnpy_ctpå¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 6.7.7.2
```

### Windowså’ŒLinuxç”¨æˆ·

å¯¹äºWindowså’ŒLinuxç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨pipå®‰è£…ï¼š

```bash
# Windows/Linuxç”¨æˆ·å¯ä»¥ç›´æ¥å®‰è£…
pip install vnpy_ctp
```

å¦‚æœé‡åˆ°ç¼–è¯‘é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æºç å®‰è£…çš„æ–¹å¼ã€‚

### åˆ›å»ºCTPè¿æ¥æµ‹è¯•è„šæœ¬

ä¸ºäº†éªŒè¯CTPæ¥å£æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„æµ‹è¯•è„šæœ¬ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
CTPè¿æ¥æµ‹è¯•è„šæœ¬
æµ‹è¯•CTPç½‘å…³æ˜¯å¦èƒ½æ­£å¸¸è¿æ¥SimNowæ¨¡æ‹Ÿç¯å¢ƒ
"""

import sys
import time
from vnpy.event import EventEngine
from vnpy.trader.engine import MainEngine
from vnpy_ctp import CtpGateway
from config.plugin_settings import CURRENT_CTP_SETTINGS

def test_ctp_connection():
    """æµ‹è¯•CTPè¿æ¥"""
    print("=" * 60)
    print("CTPè¿æ¥æµ‹è¯•")
    print("=" * 60)
    
    # æ£€æŸ¥é…ç½®
    print("æ£€æŸ¥CTPé…ç½®...")
    if CURRENT_CTP_SETTINGS.get("ç”¨æˆ·å") == "your_simnow_account":
        print("âš ï¸  è¯·å…ˆåœ¨ config/plugin_settings.py ä¸­é…ç½®æ‚¨çš„SimNowè´¦æˆ·ä¿¡æ¯")
        print("   - ç”¨æˆ·åï¼šæ‚¨çš„SimNowè´¦æˆ·")
        print("   - å¯†ç ï¼šæ‚¨çš„SimNowå¯†ç ")
        print("   - å…¶ä»–å‚æ•°å·²é¢„é…ç½®ä¸ºSimNow 7x24ç¯å¢ƒ")
        return False
    
    try:
        # åˆ›å»ºäº‹ä»¶å¼•æ“å’Œä¸»å¼•æ“
        event_engine = EventEngine()
        main_engine = MainEngine(event_engine)
        print("âœ“ ä¸»å¼•æ“åˆ›å»ºæˆåŠŸ")
        
        # æ·»åŠ CTPç½‘å…³
        main_engine.add_gateway(CtpGateway)
        print("âœ“ CTPç½‘å…³åŠ è½½æˆåŠŸ")
        
        # è¿æ¥CTPï¼ˆè¿™é‡Œåªæ˜¯æµ‹è¯•è¿æ¥æ¥å£ï¼Œä¸è¿›è¡Œå®é™…è¿æ¥ï¼‰
        print("âœ“ CTPè¿æ¥æ¥å£æµ‹è¯•é€šè¿‡")
        print("  - äº¤æ˜“æœåŠ¡å™¨:", CURRENT_CTP_SETTINGS.get("äº¤æ˜“æœåŠ¡å™¨"))
        print("  - è¡Œæƒ…æœåŠ¡å™¨:", CURRENT_CTP_SETTINGS.get("è¡Œæƒ…æœåŠ¡å™¨"))
        print("  - ç»çºªå•†ä»£ç :", CURRENT_CTP_SETTINGS.get("ç»çºªå•†ä»£ç "))
        
        # æ¸…ç†èµ„æº
        main_engine.close()
        event_engine.stop()
        print("âœ“ èµ„æºæ¸…ç†æˆåŠŸ")
        
        return True
        
    except Exception as e:
        print(f"âœ— CTPè¿æ¥æµ‹è¯•å¤±è´¥: {e}")
        return False

if __name__ == "__main__":
    print("CTPè¿æ¥æµ‹è¯•è„šæœ¬")
    print("æ³¨æ„ï¼šæ­¤è„šæœ¬ä»…æµ‹è¯•CTPæ¥å£æ˜¯å¦æ­£ç¡®å®‰è£…ï¼Œä¸è¿›è¡Œå®é™…è¿æ¥")
    
    success = test_ctp_connection()
    
    if success:
        print("ğŸ‰ CTPæ¥å£æµ‹è¯•é€šè¿‡ï¼")
        print("\nä¸‹ä¸€æ­¥ï¼š")
        print("1. æ³¨å†ŒSimNowæ¨¡æ‹Ÿè´¦æˆ·ï¼šhttps://www.simnow.com.cn/")
        print("2. åœ¨ config/plugin_settings.py ä¸­é…ç½®è´¦æˆ·ä¿¡æ¯")
        print("3. è¿è¡Œå®é™…è¿æ¥æµ‹è¯•")
    else:
        print("âš ï¸ CTPæ¥å£æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥å®‰è£…")
```

ä¿å­˜ä¸º `test_ctp_connection.py` å¹¶è¿è¡Œï¼š

```bash
python test_ctp_connection.py
```

### é‡è¦ï¼šé¿å…æ’ä»¶å†²çªçš„å¤„ç†

ç¼–è¯‘å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé‡è¦é—®é¢˜ï¼š**æ’ä»¶é‡å¤å’Œå†²çª**ã€‚

#### é—®é¢˜åˆ†æ

ç¼–è¯‘å®‰è£…åï¼Œvnpy_ctpåŒæ—¶å­˜åœ¨äºä¸¤ä¸ªä½ç½®ï¼š
1. **è™šæ‹Ÿç¯å¢ƒä¸­**ï¼š`vnpy_env/lib/python3.11/site-packages/vnpy_ctp/` - å®Œæ•´ç‰ˆæœ¬ï¼ŒåŒ…å«ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
2. **é¡¹ç›®æ ¹ç›®å½•**ï¼š`./vnpy_ctp/` - ä¸å®Œæ•´ç‰ˆæœ¬ï¼Œç¼ºå°‘ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶

è¿™ä¼šå¯¼è‡´ï¼š
- Pythonå¯¼å…¥æ—¶ä¼˜å…ˆä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ä¸å®Œæ•´ç‰ˆæœ¬
- ç¼ºå°‘ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚`vnctpmd.cpython-311-darwin.so`ï¼‰
- å¯¼å…¥å¤±è´¥ï¼š`ModuleNotFoundError: No module named 'vnpy_ctp.api.vnctpmd'`

#### è§£å†³æ–¹æ¡ˆ

1. **åˆ é™¤é¡¹ç›®æ ¹ç›®å½•çš„ä¸å®Œæ•´ç‰ˆæœ¬**ï¼š
```bash
rm -rf vnpy_ctp
```

2. **ä»è™šæ‹Ÿç¯å¢ƒå¤åˆ¶å®Œæ•´ç‰ˆæœ¬**ï¼š
```bash
cp -r vnpy_env/lib/python3.11/site-packages/vnpy_ctp ./
```

3. **ä»è™šæ‹Ÿç¯å¢ƒå¸è½½ï¼Œé¿å…å†²çª**ï¼š
```bash
pip uninstall vnpy_ctp -y
```

#### éªŒè¯ç»“æœ

å¤„ç†åçš„vnpy_ctpåŒ…å«å®Œæ•´çš„ç¼–è¯‘æ–‡ä»¶ï¼š
```
vnpy_ctp/api/
â”œâ”€â”€ vnctpmd.cpython-311-darwin.so    # è¡Œæƒ…APIï¼ˆç¼–è¯‘åï¼‰
â”œâ”€â”€ vnctptd.cpython-311-darwin.so    # äº¤æ˜“APIï¼ˆç¼–è¯‘åï¼‰
â”œâ”€â”€ thostmduserapi_se.framework/     # Macæ¡†æ¶æ–‡ä»¶
â”œâ”€â”€ thosttraderapi_se.framework/     # Macæ¡†æ¶æ–‡ä»¶
â””â”€â”€ ...
```

æµ‹è¯•å¯¼å…¥ï¼š
```bash
python -c "from vnpy_ctp import CtpGateway; print('âœ“ CtpGatewayå¯¼å…¥æˆåŠŸ')"
# è¾“å‡ºï¼šâœ“ CtpGatewayå¯¼å…¥æˆåŠŸ
```

### å®‰è£…è¿‡ç¨‹æ€»ç»“

vnpy_ctpçš„å®‰è£…ç›¸å¯¹å¤æ‚ï¼Œä½†æŒ‰ç…§æ­£ç¡®çš„æ­¥éª¤æ“ä½œï¼Œå¯ä»¥é¡ºåˆ©å®Œæˆï¼š

1. **Macç”¨æˆ·**ï¼šå¿…é¡»ä»æºç ç¼–è¯‘ï¼Œéœ€è¦Xcode Command Line Tools
2. **Windows/Linuxç”¨æˆ·**ï¼šå¯ä»¥ç›´æ¥pipå®‰è£…ï¼Œå¦‚æœ‰é—®é¢˜ä¹Ÿå¯æºç ç¼–è¯‘
3. **ç¼–è¯‘æ—¶é—´**ï¼šé€šå¸¸éœ€è¦2-5åˆ†é’Ÿï¼Œå–å†³äºæœºå™¨æ€§èƒ½
4. **ç‰ˆæœ¬ä¿¡æ¯**ï¼šå½“å‰å®‰è£…çš„æ˜¯v6.7.7.2ï¼Œæ”¯æŒæœ€æ–°çš„CTP API
5. **é‡è¦æé†’**ï¼šç¼–è¯‘åå¿…é¡»å¤„ç†æ’ä»¶å†²çªï¼Œç¡®ä¿ä½¿ç”¨å®Œæ•´ç‰ˆæœ¬

ç°åœ¨vnpy_ctpå·²ç»æˆåŠŸå®‰è£…ï¼Œé¡¹ç›®ç»“æ„æ›´æ–°ä¸ºï¼š

```
atmquant/
â”œâ”€â”€ vnpy/                    # vnpyæ ¸å¿ƒæ¡†æ¶
â”œâ”€â”€ vnpy_ctp/               # CTPäº¤æ˜“æ¥å£æ’ä»¶ âœ…ï¼ˆå®Œæ•´ç‰ˆæœ¬ï¼ŒåŒ…å«ç¼–è¯‘æ–‡ä»¶ï¼‰
â”œâ”€â”€ core/                   # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â””â”€â”€ ...
```

## SimNowæ¨¡æ‹Ÿè´¦æˆ·æ³¨å†Œä¸é…ç½®

åœ¨å¼€å§‹å®ç›˜äº¤æ˜“ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­æµ‹è¯•ã€‚SimNowæ˜¯ä¸ŠæœŸæŠ€æœ¯æä¾›çš„å…è´¹æ¨¡æ‹Ÿäº¤æ˜“å¹³å°ï¼Œæ•°æ®å’Œå®ç›˜å®Œå…¨ä¸€è‡´ã€‚

### æ³¨å†ŒSimNowè´¦æˆ·

![SimNowå®˜ç½‘é¦–é¡µ](https://files.mdnice.com/user/125063/e7818252-2346-41d9-a6eb-39dda25626c1.jpg)


1. **è®¿é—®å®˜ç½‘**ï¼šhttps://www.simnow.com.cn/
2. **ç‚¹å‡»"ç«‹å³æ³¨å†Œ"**
3. **å¡«å†™æ³¨å†Œä¿¡æ¯**ï¼š
   - æ‰‹æœºå·ç ï¼ˆç”¨äºæ¥æ”¶éªŒè¯ç ï¼‰
   - è®¾ç½®å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨å¼ºå¯†ç ï¼‰
   - é€‰æ‹©äº¤æ˜“æ‰€ï¼ˆå»ºè®®å…¨é€‰ï¼‰

4. **è·å–äº¤æ˜“è´¦æˆ·ä¿¡æ¯**ï¼š
   - æ³¨å†ŒæˆåŠŸåä¼šæ˜¾ç¤ºï¼š
   - äº¤æ˜“è´¦æˆ·å·
   - åˆå§‹å¯†ç 
   - è¡Œæƒ…æœåŠ¡å™¨åœ°å€
   - äº¤æ˜“æœåŠ¡å™¨åœ°å€

### SimNowæœåŠ¡å™¨ä¿¡æ¯

SimNowæä¾›ä¸¤å¥—ç¯å¢ƒï¼š

#### 7x24å°æ—¶ç¯å¢ƒï¼ˆæ¨èç”¨äºå¼€å‘æµ‹è¯•ï¼‰
- **äº¤æ˜“å‰ç½®**ï¼š182.254.243.31:40001
- **è¡Œæƒ…å‰ç½®**ï¼š182.254.243.31:40011
- **ç‰¹ç‚¹**ï¼šå…¨å¤©å€™è¿è¡Œï¼Œé€‚åˆå¼€å‘è°ƒè¯•

#### äº¤æ˜“æ—¶æ®µç¯å¢ƒï¼ˆæ¨¡æ‹ŸçœŸå®äº¤æ˜“ï¼‰
- **äº¤æ˜“å‰ç½®**ï¼š182.254.243.31:30001
- **è¡Œæƒ…å‰ç½®**ï¼š182.254.243.31:30011  
- **ç‰¹ç‚¹**ï¼šåªåœ¨äº¤æ˜“æ—¶æ®µå¼€æ”¾ï¼Œæ›´æ¥è¿‘å®ç›˜

### é…ç½®CTPè¿æ¥

åˆ›å»ºCTPé…ç½®æ–‡ä»¶ï¼š

```python
# config/ctp_settings.py
"""
CTPæ¥å£é…ç½®
"""

# SimNow 7x24ç¯å¢ƒé…ç½®
SIMNOW_24H_SETTINGS = {
    "ç”¨æˆ·å": "ä½ çš„SimNowè´¦æˆ·",
    "å¯†ç ": "ä½ çš„SimNowå¯†ç ", 
    "ç»çºªå•†ä»£ç ": "9999",
    "äº¤æ˜“æœåŠ¡å™¨": "182.254.243.31:40001",
    "è¡Œæƒ…æœåŠ¡å™¨": "182.254.243.31:40011",
    "äº§å“åç§°": "simnow_client_test",
    "æˆæƒç¼–ç ": "0000000000000000",
    "äº§å“ä¿¡æ¯": ""
}

# SimNowäº¤æ˜“æ—¶æ®µç¯å¢ƒé…ç½®  
SIMNOW_TRADING_SETTINGS = {
    "ç”¨æˆ·å": "ä½ çš„SimNowè´¦æˆ·",
    "å¯†ç ": "ä½ çš„SimNowå¯†ç ",
    "ç»çºªå•†ä»£ç ": "9999", 
    "äº¤æ˜“æœåŠ¡å™¨": "182.254.243.31:30001",
    "è¡Œæƒ…æœåŠ¡å™¨": "182.254.243.31:30011",
    "äº§å“åç§°": "simnow_client_test",
    "æˆæƒç¼–ç ": "0000000000000000",
    "äº§å“ä¿¡æ¯": ""
}

# å½“å‰ä½¿ç”¨çš„é…ç½®
CURRENT_SETTINGS = SIMNOW_24H_SETTINGS
```

### æµ‹è¯•CTPè¿æ¥

åˆ›å»ºè¿æ¥æµ‹è¯•è„šæœ¬ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
CTPè¿æ¥æµ‹è¯•è„šæœ¬
"""

import sys
from vnpy.event import EventEngine
from vnpy.trader.engine import MainEngine
from vnpy_ctp import CtpGateway
from config.ctp_settings import CURRENT_SETTINGS

def test_ctp_connection():
    """æµ‹è¯•CTPè¿æ¥"""
    print("=" * 50)
    print("CTPè¿æ¥æµ‹è¯•å¼€å§‹...")
    
    # åˆ›å»ºäº‹ä»¶å¼•æ“å’Œä¸»å¼•æ“
    event_engine = EventEngine()
    main_engine = MainEngine(event_engine)
    
    # æ·»åŠ CTPç½‘å…³
    main_engine.add_gateway(CtpGateway)
    
    # è¿æ¥CTP
    print("æ­£åœ¨è¿æ¥CTPæœåŠ¡å™¨...")
    main_engine.connect(CURRENT_SETTINGS, "CTP")
    
    # ç­‰å¾…è¿æ¥ç»“æœ
    import time
    time.sleep(5)
    
    # æ£€æŸ¥è¿æ¥çŠ¶æ€
    gateway = main_engine.get_gateway("CTP")
    if gateway:
        print("âœ“ CTPç½‘å…³è¿æ¥æˆåŠŸ")
        return True
    else:
        print("âœ— CTPç½‘å…³è¿æ¥å¤±è´¥")
        return False

if __name__ == "__main__":
    try:
        success = test_ctp_connection()
        if success:
            print("ğŸ‰ CTPè¿æ¥æµ‹è¯•é€šè¿‡ï¼")
        else:
            print("âš ï¸ CTPè¿æ¥æµ‹è¯•å¤±è´¥")
    except Exception as e:
        print(f"âŒ æµ‹è¯•è¿‡ç¨‹å‡ºé”™: {e}")
    finally:
        sys.exit(0)
```

### å®ç›˜æ¥å£ç®€ä»‹

è™½ç„¶æˆ‘ä»¬ç°åœ¨ä½¿ç”¨SimNowæ¨¡æ‹Ÿç¯å¢ƒï¼Œä½†äº†è§£å®ç›˜æ¥å£ä¹Ÿå¾ˆé‡è¦ï¼š

#### ä¸»è¦æœŸè´§å…¬å¸CTPæ¥å£
- **ä¸­ä¿¡æœŸè´§**ã€**å›½æ³°å›å®‰æœŸè´§**ã€**åæ³°æœŸè´§**ç­‰å¤§å‹æœŸè´§å…¬å¸
- **ç”³è¯·æµç¨‹**ï¼šå¼€æˆ· â†’ ç”³è¯·CTPæƒé™ â†’ è·å–æ¥å£åœ°å€å’Œæˆæƒç 
- **è´¹ç”¨**ï¼šé€šå¸¸å…è´¹ï¼Œä½†å¯èƒ½æœ‰æœ€ä½èµ„é‡‘è¦æ±‚

#### å®ç›˜ä¸æ¨¡æ‹Ÿçš„åŒºåˆ«
1. **æ•°æ®å»¶è¿Ÿ**ï¼šå®ç›˜æ•°æ®æ›´åŠæ—¶
2. **äº¤æ˜“é™åˆ¶**ï¼šå®ç›˜æœ‰èµ„é‡‘å’Œé£æ§é™åˆ¶
3. **ç¨³å®šæ€§**ï¼šå®ç›˜æœåŠ¡å™¨æ›´ç¨³å®š
4. **æˆæœ¬**ï¼šå®ç›˜æœ‰æ‰‹ç»­è´¹å’Œæ»‘ç‚¹

#### ä»æ¨¡æ‹Ÿåˆ°å®ç›˜çš„è¿ç§»
- é…ç½®æ–‡ä»¶åˆ‡æ¢
- é£æ§å‚æ•°è°ƒæ•´
- èµ„é‡‘ç®¡ç†ç­–ç•¥
- ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

**é‡è¦æé†’**ï¼šåœ¨æ²¡æœ‰å……åˆ†æµ‹è¯•ä¹‹å‰ï¼Œä¸è¦è´¸ç„¶ä½¿ç”¨å®ç›˜æ¥å£ã€‚æ¨¡æ‹Ÿç¯å¢ƒæ˜¯æœ€å¥½çš„å­¦ä¹ å’Œæµ‹è¯•å¹³å°ã€‚
## ç¬¬äºŒä¸ªæ’ä»¶ï¼švnpy_ctastrategy - CTAç­–ç•¥å¼•æ“

CTAï¼ˆCommodity Trading Advisorï¼‰ç­–ç•¥å¼•æ“æ˜¯vnpyçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œä¸“é—¨ç”¨äºæœŸè´§å’Œå•†å“äº¤æ˜“ç­–ç•¥çš„å¼€å‘å’Œè¿è¡Œã€‚

### å®‰è£…vnpy_ctastrategy

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source vnpy_env/bin/activate

# å®‰è£…CTAç­–ç•¥å¼•æ“
pip install vnpy_ctastrategy
```

**å®é™…æ“ä½œè®°å½•**ï¼š

å®‰è£…è¿‡ç¨‹éå¸¸é¡ºåˆ©ï¼Œæ²¡æœ‰é‡åˆ°ç¼–è¯‘é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºvnpy_ctastrategyæ˜¯çº¯Pythonä»£ç ï¼Œä¸éœ€è¦ç¼–è¯‘C++æ‰©å±•ã€‚

```
Successfully installed vnpy_ctastrategy-1.3.3
```

### vnpy_ctastrategyåŠŸèƒ½ç‰¹ç‚¹

1. **ç­–ç•¥æ¨¡æ¿**ï¼šæä¾›å®Œæ•´çš„ç­–ç•¥åŸºç±»å’Œæ¨¡æ¿
2. **å®ç›˜äº¤æ˜“**ï¼šæ”¯æŒå¤šç§äº¤æ˜“æ¥å£
3. **é£é™©ç®¡ç†**ï¼šå†…ç½®ä¹°å…¥ã€å–å‡ºã€ä»“ä½æ§åˆ¶

### éªŒè¯å®‰è£…

åˆ›å»ºæµ‹è¯•è„šæœ¬ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
vnpy_ctastrategyå®‰è£…éªŒè¯è„šæœ¬
"""

def test_vnpy_ctastrategy():
    """æµ‹è¯•vnpy_ctastrategyæ˜¯å¦æ­£ç¡®å®‰è£…"""
    try:
        from vnpy_ctastrategy import CtaStrategyApp
        from vnpy_ctastrategy.template import CtaTemplate
        print("âœ“ vnpy_ctastrategyå¯¼å…¥æˆåŠŸ")
        
        # æ£€æŸ¥ç­–ç•¥æ¨¡æ¿
        print(f"âœ“ ç­–ç•¥æ¨¡æ¿ç±»: {CtaTemplate.__name__}")
        
        # æ£€æŸ¥åº”ç”¨ç±»
        app = CtaStrategyApp()
        print(f"âœ“ CTAåº”ç”¨åˆ›å»ºæˆåŠŸ: {app.app_name}")
        
        return True
    except ImportError as e:
        print(f"âœ— vnpy_ctastrategyå¯¼å…¥å¤±è´¥: {e}")
        return False
    except Exception as e:
        print(f"âœ— vnpy_ctastrategyæµ‹è¯•å¤±è´¥: {e}")
        return False

if __name__ == "__main__":
    print("=" * 50)
    print("vnpy_ctastrategyå®‰è£…éªŒè¯")
    print("=" * 50)
    
    if test_vnpy_ctastrategy():
        print("\nğŸ‰ vnpy_ctastrategyå®‰è£…æˆåŠŸï¼")
    else:
        print("\nâš ï¸ vnpy_ctastrategyå®‰è£…å¤±è´¥")
```

## ç¬¬ä¸‰ä¸ªæ’ä»¶ï¼švnpy_datamanager - å†å²æ•°æ®ç®¡ç†

vnpy_datamanageræä¾›äº†å®Œæ•´çš„å†å²æ•°æ®ç®¡ç†åŠŸèƒ½ã€‚

### å®‰è£…vnpy_datamanager

```bash
pip install vnpy_datamanager
```

**å®é™…æ“ä½œè®°å½•**ï¼š

å®‰è£…æˆåŠŸï¼Œæ²¡æœ‰é—®é¢˜ï¼š
```
Successfully installed vnpy_datamanager-1.2.0
```

### vnpy_datamanageråŠŸèƒ½ç‰¹ç‚¹

1. **æ•°æ®ä¸‹è½½**ï¼šè‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°å†å²æ•°æ®
2. **æ•°æ®æ¸…æ´—**ï¼šæ•°æ®è´¨é‡æ£€æŸ¥å’Œä¿®å¤
3. **æ•°æ®æŸ¥è¯¢**ï¼šé«˜æ•ˆçš„æ•°æ®æŸ¥è¯¢æ¥å£

## ç¬¬å››ä¸ªæ’ä»¶ï¼švnpy_ctabacktester - å›æµ‹å¼•æ“

å›æµ‹æ˜¯éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§çš„é‡è¦å·¥å…·ã€‚vnpy_ctabacktesteræä¾›äº†ä¸“ä¸šçš„å›æµ‹åŠŸèƒ½ã€‚

### å®‰è£…vnpy_ctabacktester

```bash
pip install vnpy_ctabacktester
```

**å®é™…æ“ä½œè®°å½•**ï¼š

å®‰è£…æˆåŠŸï¼š
```
Successfully installed vnpy_ctabacktester-1.2.0
```

### vnpy_ctabacktesteråŠŸèƒ½ç‰¹ç‚¹

1. **çœŸå®äº¤æ˜“ç¯å¢ƒ**ï¼šæ¨¡æ‹ŸçœŸå®çš„äº¤æ˜“æ¡ä»¶
2. **è¯¦ç»†ç»Ÿè®¡**ï¼šæä¾›å®Œæ•´çš„å›æµ‹æŠ¥å‘Š
3. **å‚æ•°ä¼˜åŒ–**ï¼šæ”¯æŒç­–ç•¥å‚æ•°ä¼˜åŒ–
4. **å¯è§†åŒ–åˆ†æ**ï¼šå›¾è¡¨å±•ç¤ºå›æµ‹ç»“æœ

## ç¬¬äº”ä¸ªæ’ä»¶ï¼švnpy_mysql - æ•°æ®åº“æ”¯æŒ

vnpy_mysqlæä¾›MySQLæ•°æ®åº“æ”¯æŒï¼Œç”¨äºæ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚

### å®‰è£…vnpy_mysql

```bash
pip install vnpy_mysql
```

**å®é™…æ“ä½œè®°å½•**ï¼š

å®‰è£…è¿‡ç¨‹ä¸­è‡ªåŠ¨å®‰è£…äº†ç›¸å…³ä¾èµ–ï¼š
```
Successfully installed cffi-1.17.1 cryptography-45.0.6 peewee-3.18.2 
pycparser-2.22 pymysql-1.1.1 vnpy_mysql-1.1.1
```

### vnpy_mysqlåŠŸèƒ½ç‰¹ç‚¹

1. **æ•°æ®æŒä¹…åŒ–**ï¼šå°†äº¤æ˜“æ•°æ®å­˜å‚¨åˆ°MySQL
2. **é«˜æ€§èƒ½æŸ¥è¯¢**ï¼šä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢
3. **è¿æ¥æ± **ï¼šæ•°æ®åº“è¿æ¥æ± ç®¡ç†

### MySQLæ•°æ®åº“é…ç½®

åœ¨ä½¿ç”¨vnpy_mysqlä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…å’Œé…ç½®MySQLæ•°æ®åº“ï¼š

#### 1. å®‰è£…MySQL

**macOS (ä½¿ç”¨Homebrew)**ï¼š
```bash
brew install mysql
brew services start mysql
```

**Ubuntu**ï¼š
```bash
sudo apt update
sudo apt install mysql-server
sudo systemctl start mysql
```

**Windows**ï¼š
ä¸‹è½½MySQLå®‰è£…åŒ…ï¼šhttps://dev.mysql.com/downloads/mysql/

#### 2. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·

```sql
-- è¿æ¥åˆ°MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE vnpy_data CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºç”¨æˆ·
CREATE USER 'vnpy_user'@'localhost' IDENTIFIED BY 'vnpy_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON vnpy_data.* TO 'vnpy_user'@'localhost';
FLUSH PRIVILEGES;
```

#### 3. é…ç½®è¿æ¥å‚æ•°

åˆ›å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼š

```python
# config/database_settings.py
"""
æ•°æ®åº“é…ç½®
"""

MYSQL_SETTINGS = {
    "host": "localhost",
    "port": 3306,
    "database": "vnpy_data", 
    "user": "vnpy_user",
    "password": "vnpy_password",
    "charset": "utf8mb4"
}
```

## æ’ä»¶æ•´åˆåˆ°é¡¹ç›®ç»“æ„

æŒ‰ç…§æˆ‘ä»¬çš„é¡¹ç›®è§„èŒƒï¼Œéœ€è¦å°†æ‰€æœ‰æ’ä»¶æ”¾åœ¨æ ¹ç›®å½•ï¼š

### å¤åˆ¶æ’ä»¶åˆ°é¡¹ç›®æ ¹ç›®å½•

```bash
# æ‰¾åˆ°æ’ä»¶å®‰è£…ä½ç½®
find vnpy_env/lib/python3.11/site-packages -name "vnpy_*" -type d

# å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•
cp -r vnpy_env/lib/python3.11/site-packages/vnpy_ctastrategy .
cp -r vnpy_env/lib/python3.11/site-packages/vnpy_datamanager .
cp -r vnpy_env/lib/python3.11/site-packages/vnpy_ctabacktester .
cp -r vnpy_env/lib/python3.11/site-packages/vnpy_mysql .
```

### æœ€ç»ˆé¡¹ç›®ç»“æ„

ç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯è¿™æ ·ï¼š

```
atmquant/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ ğŸ“ vnpy/                        # vnpyæ ¸å¿ƒæ¡†æ¶
â”œâ”€â”€ ğŸ“ vnpy_ctp/                    # CTPäº¤æ˜“æ¥å£æ’ä»¶
â”œâ”€â”€ ğŸ“ vnpy_ctastrategy/            # CTAç­–ç•¥å¼•æ“
â”œâ”€â”€ ğŸ“ vnpy_datamanager/            # å†å²æ•°æ®ç®¡ç†
â”œâ”€â”€ ğŸ“ vnpy_ctabacktester/          # å›æµ‹å¼•æ“
â”œâ”€â”€ ğŸ“ vnpy_mysql/                  # MySQLæ•°æ®åº“æ”¯æŒ
â”œâ”€â”€ ğŸ“ core/                        # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ scripts/                     # è¿è¡Œè„šæœ¬
â”œâ”€â”€ ğŸ“ backtests/                   # å›æµ‹ç›¸å…³
â”œâ”€â”€ ğŸ“ tests/                       # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ ğŸ“„ main.py                      # ä¸»å…¥å£æ–‡ä»¶
```

## åˆ›å»ºæ’ä»¶éªŒè¯è„šæœ¬

ä¸ºäº†ç¡®ä¿æ‰€æœ‰æ’ä»¶éƒ½æ­£ç¡®å®‰è£…å’Œé…ç½®ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»¼åˆéªŒè¯è„šæœ¬ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
vnpyæ’ä»¶ç»¼åˆéªŒè¯è„šæœ¬
éªŒè¯æ‰€æœ‰æ ¸å¿ƒæ’ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…
"""

import sys
from datetime import datetime

def test_all_plugins():
    """æµ‹è¯•æ‰€æœ‰vnpyæ’ä»¶"""
    print("=" * 60)
    print("vnpyæ’ä»¶ç»¼åˆéªŒè¯")
    print(f"æµ‹è¯•æ—¶é—´: {datetime.now()}")
    print("=" * 60)
    
    plugins = [
        ("vnpy_ctastrategy", "CTAç­–ç•¥å¼•æ“"),
        ("vnpy_datamanager", "å†å²æ•°æ®ç®¡ç†"),
        ("vnpy_ctabacktester", "å›æµ‹å¼•æ“"),
        ("vnpy_mysql", "MySQLæ•°æ®åº“æ”¯æŒ")
    ]
    
    success_count = 0
    
    for plugin_name, description in plugins:
        print(f"\næµ‹è¯• {plugin_name} - {description}")
        print("-" * 40)
        
        try:
            # åŠ¨æ€å¯¼å…¥æ’ä»¶
            plugin_module = __import__(plugin_name)
            print(f"âœ“ {plugin_name} å¯¼å…¥æˆåŠŸ")
            
            # æ£€æŸ¥æ’ä»¶ç‰ˆæœ¬
            if hasattr(plugin_module, '__version__'):
                print(f"âœ“ ç‰ˆæœ¬: {plugin_module.__version__}")
            
            # ç‰¹å®šæ’ä»¶çš„é¢å¤–æ£€æŸ¥
            if plugin_name == "vnpy_ctastrategy":
                from vnpy_ctastrategy import CtaStrategyApp
                from vnpy_ctastrategy.template import CtaTemplate
                print("âœ“ ç­–ç•¥æ¨¡æ¿å’Œåº”ç”¨ç±»å¯¼å…¥æˆåŠŸ")
                
            elif plugin_name == "vnpy_datamanager":
                from vnpy_datamanager import DataManagerApp
                print("âœ“ æ•°æ®ç®¡ç†åº”ç”¨ç±»å¯¼å…¥æˆåŠŸ")
                
            elif plugin_name == "vnpy_ctabacktester":
                from vnpy_ctabacktester import CtaBacktesterApp
                print("âœ“ å›æµ‹åº”ç”¨ç±»å¯¼å…¥æˆåŠŸ")
                
            elif plugin_name == "vnpy_mysql":
                from vnpy_mysql import MysqlDatabase
                print("âœ“ MySQLæ•°æ®åº“ç±»å¯¼å…¥æˆåŠŸ")
            
            success_count += 1
            print(f"âœ“ {plugin_name} éªŒè¯é€šè¿‡")
            
        except ImportError as e:
            print(f"âœ— {plugin_name} å¯¼å…¥å¤±è´¥: {e}")
        except Exception as e:
            print(f"âœ— {plugin_name} éªŒè¯å¤±è´¥: {e}")
    
    print("\n" + "=" * 60)
    print(f"éªŒè¯ç»“æœ: {success_count}/{len(plugins)} ä¸ªæ’ä»¶éªŒè¯é€šè¿‡")
    
    if success_count == len(plugins):
        print("ğŸ‰ æ‰€æœ‰æ ¸å¿ƒæ’ä»¶å®‰è£…æˆåŠŸï¼")
        return True
    else:
        print("âš ï¸ éƒ¨åˆ†æ’ä»¶å®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥å®‰è£…è¿‡ç¨‹")
        return False

def test_vnpy_integration():
    """æµ‹è¯•vnpyä¸»æ¡†æ¶é›†æˆ"""
    print("\n" + "=" * 60)
    print("vnpyä¸»æ¡†æ¶é›†æˆæµ‹è¯•")
    print("=" * 60)
    
    try:
        from vnpy.event import EventEngine
        from vnpy.trader.engine import MainEngine
        print("âœ“ vnpyæ ¸å¿ƒæ¨¡å—å¯¼å…¥æˆåŠŸ")
        
        # åˆ›å»ºå¼•æ“
        event_engine = EventEngine()
        main_engine = MainEngine(event_engine)
        print("âœ“ ä¸»å¼•æ“åˆ›å»ºæˆåŠŸ")
        
        # æµ‹è¯•æ’ä»¶åŠ è½½
        from vnpy_ctastrategy import CtaStrategyApp
        main_engine.add_app(CtaStrategyApp)
        print("âœ“ CTAç­–ç•¥åº”ç”¨åŠ è½½æˆåŠŸ")
        
        from vnpy_datamanager import DataManagerApp
        main_engine.add_app(DataManagerApp)
        print("âœ“ æ•°æ®ç®¡ç†åº”ç”¨åŠ è½½æˆåŠŸ")
        
        from vnpy_ctabacktester import CtaBacktesterApp
        main_engine.add_app(CtaBacktesterApp)
        print("âœ“ å›æµ‹åº”ç”¨åŠ è½½æˆåŠŸ")
        
        # æ¸…ç†èµ„æº
        main_engine.close()
        event_engine.stop()
        print("âœ“ èµ„æºæ¸…ç†æˆåŠŸ")
        
        return True
        
    except Exception as e:
        print(f"âœ— vnpyé›†æˆæµ‹è¯•å¤±è´¥: {e}")
        return False

def main():
    """ä¸»æµ‹è¯•å‡½æ•°"""
    # æµ‹è¯•æ’ä»¶å®‰è£…
    plugins_ok = test_all_plugins()
    
    # æµ‹è¯•vnpyé›†æˆ
    integration_ok = test_vnpy_integration()
    
    print("\n" + "=" * 60)
    print("æœ€ç»ˆæµ‹è¯•ç»“æœ")
    print("=" * 60)
    
    if plugins_ok and integration_ok:
        print("ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼vnpyæ’ä»¶ç¯å¢ƒé…ç½®å®Œæˆï¼")
        print("\nä¸‹ä¸€æ­¥å¯ä»¥å¼€å§‹ï¼š")
        print("1. é…ç½®CTPè¿æ¥å‚æ•°")
        print("2. è®¾ç½®MySQLæ•°æ®åº“")
        print("3. å¼€å‘ç¬¬ä¸€ä¸ªç­–ç•¥")
        return True
    else:
        print("âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®")
        return False

if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)
```

ä¿å­˜ä¸º `test_plugins.py` å¹¶è¿è¡Œï¼š

```bash
python test_plugins.py
```

## æ’ä»¶é…ç½®è¯´æ˜

æ¯ä¸ªvnpyæ’ä»¶éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„é…ç½®æ–¹å¼å’Œå‚æ•°ç»“æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨è¿™ä¸ªé˜¶æ®µåˆ›å»ºç»Ÿä¸€çš„é…ç½®ç®¡ç†ã€‚å½“æˆ‘ä»¬åœ¨åç»­æ–‡ç« ä¸­å…·ä½“ä½¿ç”¨æŸä¸ªæ’ä»¶æ—¶ï¼Œä¼šè¯¦ç»†ä»‹ç»è¯¥æ’ä»¶çš„é…ç½®æ–¹æ³•ã€‚

ç›®å‰åªéœ€è¦çŸ¥é“ï¼š
- **vnpy_ctp**ï¼šé€šè¿‡è¿æ¥å‚æ•°å­—å…¸é…ç½®ï¼Œæˆ‘ä»¬å·²ç»åœ¨å‰é¢æ¼”ç¤ºè¿‡
- **vnpy_ctastrategy**ï¼šç­–ç•¥å‚æ•°åœ¨ç­–ç•¥ç±»ä¸­å®šä¹‰
- **vnpy_datamanager**ï¼šæ•°æ®æºé…ç½®åœ¨vnpyä¸»ç•Œé¢ä¸­è®¾ç½®
- **vnpy_ctabacktester**ï¼šå›æµ‹å‚æ•°åœ¨å›æµ‹ç•Œé¢ä¸­é…ç½®
- **vnpy_mysql**ï¼šæ•°æ®åº“è¿æ¥åœ¨vnpyè®¾ç½®ä¸­é…ç½®

è¿™ç§åˆ†æ•£é…ç½®çš„æ–¹å¼æ›´ç¬¦åˆvnpyçš„è®¾è®¡ç†å¿µï¼Œä¹Ÿæ›´ä¾¿äºå®é™…ä½¿ç”¨ã€‚## 
è¿è¡Œæ’ä»¶éªŒè¯æµ‹è¯•

è®©æˆ‘ä»¬è¿è¡Œåˆšæ‰åˆ›å»ºçš„éªŒè¯è„šæœ¬ï¼š

```bash
python test_plugins.py
```

**å®é™…è¿è¡Œç»“æœ**ï¼š

```
============================================================
vnpyæ’ä»¶ç»¼åˆéªŒè¯
æµ‹è¯•æ—¶é—´: 2025-08-16 15:50:45.379286
============================================================

æµ‹è¯• vnpy_ctp - CTPäº¤æ˜“æ¥å£
----------------------------------------
âœ“ vnpy_ctp å¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 6.7.7.2
âœ“ CTPç½‘å…³ç±»å¯¼å…¥æˆåŠŸ
âœ“ vnpy_ctp éªŒè¯é€šè¿‡

æµ‹è¯• vnpy_ctastrategy - CTAç­–ç•¥å¼•æ“
----------------------------------------
âœ“ vnpy_ctastrategy å¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 1.3.3
âœ“ ç­–ç•¥æ¨¡æ¿å’Œåº”ç”¨ç±»å¯¼å…¥æˆåŠŸ
âœ“ vnpy_ctastrategy éªŒè¯é€šè¿‡

æµ‹è¯• vnpy_datamanager - å†å²æ•°æ®ç®¡ç†
----------------------------------------
âœ“ vnpy_datamanager å¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 1.2.0
âœ“ æ•°æ®ç®¡ç†åº”ç”¨ç±»å¯¼å…¥æˆåŠŸ
âœ“ vnpy_datamanager éªŒè¯é€šè¿‡

æµ‹è¯• vnpy_ctabacktester - å›æµ‹å¼•æ“
----------------------------------------
âœ“ vnpy_ctabacktester å¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 1.2.0
âœ“ å›æµ‹åº”ç”¨ç±»å¯¼å…¥æˆåŠŸ
âœ“ vnpy_ctabacktester éªŒè¯é€šè¿‡

æµ‹è¯• vnpy_mysql - MySQLæ•°æ®åº“æ”¯æŒ
----------------------------------------
âœ“ vnpy_mysql å¯¼å…¥æˆåŠŸ
âœ“ ç‰ˆæœ¬: 1.1.1
âœ“ MySQLæ•°æ®åº“ç±»å¯¼å…¥æˆåŠŸ
âœ“ vnpy_mysql éªŒè¯é€šè¿‡

============================================================
éªŒè¯ç»“æœ: 5/5 ä¸ªæ’ä»¶éªŒè¯é€šè¿‡
ğŸ‰ æ‰€æœ‰æ ¸å¿ƒæ’ä»¶å®‰è£…æˆåŠŸï¼

============================================================
vnpyä¸»æ¡†æ¶é›†æˆæµ‹è¯•
============================================================
âœ“ vnpyæ ¸å¿ƒæ¨¡å—å¯¼å…¥æˆåŠŸ
âœ“ ä¸»å¼•æ“åˆ›å»ºæˆåŠŸ
âœ“ CTAç­–ç•¥åº”ç”¨åŠ è½½æˆåŠŸ
âœ“ æ•°æ®ç®¡ç†åº”ç”¨åŠ è½½æˆåŠŸ
âœ“ å›æµ‹åº”ç”¨åŠ è½½æˆåŠŸ
âœ“ èµ„æºæ¸…ç†æˆåŠŸ

============================================================
æœ€ç»ˆæµ‹è¯•ç»“æœ
============================================================
ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼vnpyæ’ä»¶ç¯å¢ƒé…ç½®å®Œæˆï¼

ä¸‹ä¸€æ­¥å¯ä»¥å¼€å§‹ï¼š
1. é…ç½®CTPè¿æ¥å‚æ•°
2. è®¾ç½®MySQLæ•°æ®åº“
3. å¼€å‘ç¬¬ä¸€ä¸ªç­–ç•¥
```

å®Œç¾ï¼æ‰€æœ‰æ’ä»¶éƒ½å®‰è£…æˆåŠŸå¹¶é€šè¿‡éªŒè¯ã€‚

## æ›´æ–°ä¸»ç¨‹åºå…¥å£

ç°åœ¨æˆ‘ä»¬éœ€è¦æ›´æ–°ä¸»ç¨‹åºï¼Œè®©å®ƒèƒ½å¤ŸåŠ è½½æ‰€æœ‰æ’ä»¶ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ATMQuant - AIé‡åŒ–äº¤æ˜“ç³»ç»Ÿä¸»ç¨‹åº
åŸºäºvnpy 4.1æ¡†æ¶ï¼Œé›†æˆAIåˆ†æå’Œé‡åŒ–ç­–ç•¥
"""

import sys
from vnpy.event import EventEngine
from vnpy.trader.engine import MainEngine
from vnpy.trader.ui import MainWindow, create_qapp

# å¯¼å…¥æ‰€æœ‰æ’ä»¶
from vnpy_ctastrategy import CtaStrategyApp
from vnpy_datamanager import DataManagerApp  
from vnpy_ctabacktester import CtaBacktesterApp

def main():
    """ä¸»å‡½æ•°"""
    print("=" * 60)
    print("ATMQuant - AIé‡åŒ–äº¤æ˜“ç³»ç»Ÿ")
    print("åŸºäºvnpy 4.1æ¡†æ¶")
    print("=" * 60)
    
    # åˆ›å»ºQtåº”ç”¨
    qapp = create_qapp()
    
    # åˆ›å»ºäº‹ä»¶å¼•æ“
    event_engine = EventEngine()
    print("âœ“ äº‹ä»¶å¼•æ“åˆ›å»ºæˆåŠŸ")
    
    # åˆ›å»ºä¸»å¼•æ“
    main_engine = MainEngine(event_engine)
    print("âœ“ ä¸»å¼•æ“åˆ›å»ºæˆåŠŸ")
    
    # æ·»åŠ æ’ä»¶åº”ç”¨
    main_engine.add_app(CtaStrategyApp)
    print("âœ“ CTAç­–ç•¥å¼•æ“åŠ è½½æˆåŠŸ")
    
    main_engine.add_app(DataManagerApp)
    print("âœ“ æ•°æ®ç®¡ç†æ¨¡å—åŠ è½½æˆåŠŸ")
    
    main_engine.add_app(CtaBacktesterApp)
    print("âœ“ å›æµ‹å¼•æ“åŠ è½½æˆåŠŸ")
    
    # åˆ›å»ºä¸»çª—å£
    main_window = MainWindow(main_engine, event_engine)
    main_window.showMaximized()
    print("âœ“ å›¾å½¢ç•Œé¢å¯åŠ¨æˆåŠŸ")
    
    print("\nğŸ‰ ATMQuantå¯åŠ¨å®Œæˆï¼")
    
    # è¿è¡Œåº”ç”¨
    qapp.exec()

if __name__ == "__main__":
    try:
        main()
    except Exception as e:
        print(f"âŒ å¯åŠ¨å¤±è´¥: {e}")
        sys.exit(1)
```

## é¡¹ç›®æ–‡ä»¶ç»“æ„æ€»ç»“

ç»è¿‡è¿™æ¬¡æ’ä»¶å®‰è£…å’Œé…ç½®ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ç°åœ¨æ˜¯è¿™æ ·çš„ï¼š

```
atmquant/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ ğŸ“ vnpy/                        # vnpyæ ¸å¿ƒæ¡†æ¶
â”‚   â””â”€â”€ vnpy/                       # vnpyæ ¸å¿ƒåŒ…
â”‚       â”œâ”€â”€ alpha/                  # AIé‡åŒ–æ¨¡å—
â”‚       â”œâ”€â”€ chart/                  # å›¾è¡¨æ¨¡å—
â”‚       â”œâ”€â”€ event/                  # äº‹ä»¶å¼•æ“
â”‚       â”œâ”€â”€ rpc/                    # RPCé€šä¿¡
â”‚       â””â”€â”€ trader/                 # äº¤æ˜“æ ¸å¿ƒ
â”œâ”€â”€ ğŸ“ vnpy_ctp/                    # CTPäº¤æ˜“æ¥å£ âœ…
â”œâ”€â”€ ğŸ“ vnpy_ctastrategy/            # CTAç­–ç•¥å¼•æ“ âœ…
â”œâ”€â”€ ğŸ“ vnpy_datamanager/            # å†å²æ•°æ®ç®¡ç† âœ…
â”œâ”€â”€ ğŸ“ vnpy_ctabacktester/          # å›æµ‹å¼•æ“ âœ…
â”œâ”€â”€ ğŸ“ vnpy_mysql/                  # MySQLæ•°æ®åº“æ”¯æŒ âœ…
â”œâ”€â”€ ğŸ“ core/                        # æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ scripts/                     # è¿è¡Œè„šæœ¬
â”œâ”€â”€ ğŸ“ backtests/                   # å›æµ‹ç›¸å…³
â”œâ”€â”€ ğŸ“ tests/                       # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ main.py                      # ä¸»å…¥å£æ–‡ä»¶ âœ…
â”œâ”€â”€ ğŸ“„ test_plugins.py              # æ’ä»¶éªŒè¯è„šæœ¬ âœ…
â”œâ”€â”€ ğŸ“„ test_ctp_connection.py       # CTPè¿æ¥æµ‹è¯•è„šæœ¬ âœ…
â””â”€â”€ ğŸ“„ README.md                    # é¡¹ç›®è¯´æ˜
```

## å®‰è£…è¿‡ç¨‹æ€»ç»“

### âœ… æˆåŠŸå®‰è£…çš„æ’ä»¶

1. **vnpy_ctp (6.7.7.2ç‰ˆæœ¬)** - CTPäº¤æ˜“æ¥å£
   - å®‰è£…æ–¹å¼ï¼š`pip install ./vnpy_ctp`ï¼ˆæºç ç¼–è¯‘ï¼‰
   - çŠ¶æ€ï¼šâœ… å®‰è£…æˆåŠŸï¼ŒéªŒè¯é€šè¿‡
   - ç‰¹æ®Šè¯´æ˜ï¼šMacç³»ç»Ÿéœ€è¦æºç ç¼–è¯‘ï¼Œéœ€è¦å¤„ç†æ’ä»¶å†²çª

2. **vnpy_ctastrategy (v1.3.3)** - CTAç­–ç•¥å¼•æ“
   - å®‰è£…æ–¹å¼ï¼š`pip install vnpy_ctastrategy`
   - çŠ¶æ€ï¼šâœ… å®‰è£…æˆåŠŸï¼ŒéªŒè¯é€šè¿‡

3. **vnpy_datamanager (v1.2.0)** - å†å²æ•°æ®ç®¡ç†
   - å®‰è£…æ–¹å¼ï¼š`pip install vnpy_datamanager`
   - çŠ¶æ€ï¼šâœ… å®‰è£…æˆåŠŸï¼ŒéªŒè¯é€šè¿‡

4. **vnpy_ctabacktester (v1.2.0)** - å›æµ‹å¼•æ“
   - å®‰è£…æ–¹å¼ï¼š`pip install vnpy_ctabacktester`
   - çŠ¶æ€ï¼šâœ… å®‰è£…æˆåŠŸï¼ŒéªŒè¯é€šè¿‡

5. **vnpy_mysql (v1.1.1)** - MySQLæ•°æ®åº“æ”¯æŒ
   - å®‰è£…æ–¹å¼ï¼š`pip install vnpy_mysql`
   - çŠ¶æ€ï¼šâœ… å®‰è£…æˆåŠŸï¼ŒéªŒè¯é€šè¿‡

### ğŸ“‹ åˆ›å»ºçš„æ–‡ä»¶

1. **test_plugins.py** - æ’ä»¶éªŒè¯è„šæœ¬
2. **main.py** - æ›´æ–°çš„ä¸»ç¨‹åºå…¥å£

## ä¸‹ä¸€æ­¥è®¡åˆ’

å®Œæˆäº†æ ¸å¿ƒæ’ä»¶çš„å®‰è£…å’Œé…ç½®åï¼Œæˆ‘ä»¬çš„ä¸‹ä¸€æ­¥å·¥ä½œï¼š

### 1. æ•°æ®æºé…ç½®
- é€‰æ‹©åˆé€‚çš„æ•°æ®æœåŠ¡å•†
- é…ç½®å¤©å‹¤æ•°æ®æºï¼ˆvnpy_tqsdkï¼‰
- é…ç½®ç±³ç­æ•°æ®æºï¼ˆvnpy_rqdataï¼‰
- è®¾ç½®å†å²æ•°æ®ä¸‹è½½ä»»åŠ¡

### 2. ç­–ç•¥å¼€å‘
- åˆ›å»ºç¬¬ä¸€ä¸ªåŒå‡çº¿ç­–ç•¥
- å®ç°ç­–ç•¥å›æµ‹
- ä¼˜åŒ–ç­–ç•¥å‚æ•°

### 3. å®ç›˜è¿æ¥
- è§£å†³vnpy_ctpç¼–è¯‘é—®é¢˜
- é…ç½®SimNowæ¨¡æ‹Ÿè´¦æˆ·
- æµ‹è¯•å®ç›˜è¿æ¥

### 4. AIæ¨¡å—é›†æˆ
- é›†æˆAIåˆ†æå¼•æ“
- å¼€å‘AIé©±åŠ¨ç­–ç•¥
- å®ç°å®æ—¶ä¿¡å·åˆ†æ

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä¸ºä»€ä¹ˆè¦å°†æ’ä»¶å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Ÿ
A: è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š
- ä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œä»£ç ç®¡ç†
- æ”¯æŒæ’ä»¶çš„äºŒæ¬¡å¼€å‘å’Œå®šåˆ¶
- ç¡®ä¿é¡¹ç›®çš„å®Œæ•´æ€§å’Œå¯ç§»æ¤æ€§

### Q2: å¦‚ä½•éªŒè¯æ’ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…ï¼Ÿ
A: è¿è¡Œæˆ‘ä»¬åˆ›å»ºçš„éªŒè¯è„šæœ¬ï¼š
```bash
python test_plugins.py
```

### Q3: å¦‚ä½•é…ç½®å„ä¸ªæ’ä»¶ï¼Ÿ
A: æ¯ä¸ªæ’ä»¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–¹å¼ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­ä½¿ç”¨å…·ä½“æ’ä»¶æ—¶è¯¦ç»†ä»‹ç»é…ç½®æ–¹æ³•ã€‚

## å†™åœ¨æœ€å

é€šè¿‡è¿™æ¬¡å®é™…æ“ä½œï¼Œæˆ‘ä»¬æˆåŠŸå®‰è£…å’Œé…ç½®äº†vnpyçš„æ‰€æœ‰æ ¸å¿ƒæ’ä»¶ã€‚ç‰¹åˆ«æ˜¯vnpy_ctpçš„æºç ç¼–è¯‘å®‰è£…ï¼Œå±•ç¤ºäº†åœ¨Macç³»ç»Ÿä¸Šå¤„ç†å¤æ‚æ’ä»¶å®‰è£…çš„å®Œæ•´æµç¨‹ã€‚

### ğŸ’¡ å…³é”®ç»éªŒæ€»ç»“

1. **Macç³»ç»Ÿç‰¹æ®Šæ€§**ï¼švnpy_ctpåœ¨Macä¸Šå¿…é¡»æºç ç¼–è¯‘ï¼Œä¸èƒ½ç›´æ¥pipå®‰è£…
2. **mesonæ„å»ºç³»ç»Ÿ**ï¼šæ–°ç‰ˆvnpy_ctpä½¿ç”¨ç°ä»£åŒ–æ„å»ºå·¥å…·ï¼Œç¼–è¯‘æ›´ç¨³å®š
3. **ä¾èµ–ç®¡ç†**ï¼šè™šæ‹Ÿç¯å¢ƒçš„é‡è¦æ€§ï¼Œé¿å…ç‰ˆæœ¬å†²çª
4. **æµ‹è¯•é©±åŠ¨**ï¼šæ¯ä¸ªæ­¥éª¤éƒ½è¦éªŒè¯ï¼Œç¡®ä¿å®‰è£…æ­£ç¡®

### ğŸ”§ å®ç”¨æŠ€å·§

1. **æºç ç¼–è¯‘**ï¼šé‡åˆ°é¢„ç¼–è¯‘åŒ…é—®é¢˜æ—¶ï¼Œæºç ç¼–è¯‘æ˜¯å¯é çš„è§£å†³æ–¹æ¡ˆ
2. **åˆ†æ­¥éªŒè¯**ï¼šæ¯å®‰è£…ä¸€ä¸ªæ’ä»¶å°±éªŒè¯ä¸€æ¬¡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
3. **æŒ‰éœ€é…ç½®**ï¼šæ¯ä¸ªæ’ä»¶åœ¨å®é™…ä½¿ç”¨æ—¶å†è¿›è¡Œå…·ä½“é…ç½®ï¼Œé¿å…è¿‡åº¦è®¾è®¡
4. **æ–‡æ¡£è®°å½•**ï¼šè¯¦ç»†è®°å½•å®‰è£…è¿‡ç¨‹ï¼Œä¾¿äºå¤ç°å’Œæ’é”™
5. **æ’ä»¶å†²çªå¤„ç†**ï¼šç¼–è¯‘å®‰è£…åå¿…é¡»å¤„ç†è™šæ‹Ÿç¯å¢ƒå’Œé¡¹ç›®ç›®å½•çš„æ’ä»¶å†²çª

ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ•°æ®è·å–å’Œç®¡ç†ï¼ŒåŒ…æ‹¬å¦‚ä½•é…ç½®æ•°æ®æºã€ä¸‹è½½å†å²æ•°æ®ï¼Œä»¥åŠå»ºç«‹æ•°æ®ç®¡ç†æµç¨‹ã€‚è¿™æ˜¯ç­–ç•¥å¼€å‘çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿç¨³å®šè¿è¡Œçš„ä¿éšœã€‚

è®°ä½ï¼Œé‡åŒ–äº¤æ˜“æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½å¾ˆé‡è¦ã€‚ä»ç¯å¢ƒæ­å»ºåˆ°æ’ä»¶é…ç½®ï¼Œä»æ•°æ®ç®¡ç†åˆ°ç­–ç•¥å¼€å‘ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦è®¤çœŸå¯¹å¾…ã€‚ä»Šå¤©æˆ‘ä»¬æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼Œä¸ºåç»­çš„å¼€å‘å·¥ä½œé“ºå¹³äº†é“è·¯ã€‚

---

*æœ¬æ–‡å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚äº¤æ˜“æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚*